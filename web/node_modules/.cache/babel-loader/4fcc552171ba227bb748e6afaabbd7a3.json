{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hyejin Kim\\\\Documents\\\\Programming\\\\Chatapp\\\\\\uC138\\uBC88\\uC9F8- \\uB9AC\\uC561\\uD2B8,CSS\\\\my-chat-app-3\\\\web\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState, useRef } from 'react';\nimport { socket, SocketContext, SOCKET_EVENT } from './service/socket';\nimport Chat from './components/Chat';\nimport Login from './components/Login';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const prevNickname = useRef(null);\n  const [nickname, setNickname] = useState('');\n  useEffect(() => {\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n  useEffect(() => {\n    if (prevNickname.current) {\n      socket.emit(SOCKET_EVENT.UPDATE_NICKNAME, {\n        prevNickname: prevNickname.current,\n        nickname\n      });\n    } else {\n      socket.emit(SOCKET_EVENT.JOIN_ROOM, {\n        nickname\n      });\n    }\n  }, [nickname]);\n  const handleSubmitNickname = useCallback(newNickname => {\n    prevNickname.current = nickname;\n\n    if (newNickname === '') {\n      setNickname('');\n    } else {\n      setNickname(newNickname);\n    }\n  }, [nickname]);\n  return /*#__PURE__*/_jsxDEV(SocketContext.Provider, {\n    value: socket,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: !nickname ? /*#__PURE__*/_jsxDEV(Login, {\n        handleSubmitNickname: handleSubmitNickname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Chat, {\n        nickname: nickname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"IvZGLe3dsBH/eEFoiTDE9pSH+e8=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","useRef","socket","SocketContext","SOCKET_EVENT","Chat","Login","App","prevNickname","nickname","setNickname","disconnect","current","emit","UPDATE_NICKNAME","JOIN_ROOM","handleSubmitNickname","newNickname"],"sources":["C:/Users/Hyejin Kim/Documents/Programming/Chatapp/세번째- 리액트,CSS/my-chat-app-3/web/src/App.js"],"sourcesContent":["import React, { useCallback, useEffect, useState, useRef } from 'react';\r\n\r\nimport { socket, SocketContext, SOCKET_EVENT } from './service/socket';\r\nimport Chat from './components/Chat';\r\nimport Login from './components/Login';\r\n\r\nimport './App.css';\r\n\r\nconst App = () => {\r\n  const prevNickname = useRef(null);\r\n  const [nickname, setNickname] = useState('');\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (prevNickname.current) {\r\n      socket.emit(SOCKET_EVENT.UPDATE_NICKNAME, {\r\n        prevNickname: prevNickname.current,\r\n        nickname,\r\n      });\r\n    } else {\r\n      socket.emit(SOCKET_EVENT.JOIN_ROOM, { nickname });\r\n    }\r\n  }, [nickname]);\r\n\r\n  const handleSubmitNickname = useCallback(\r\n    (newNickname) => {\r\n      prevNickname.current = nickname;\r\n\r\n      if (newNickname === '') {\r\n        setNickname('');\r\n      } else {\r\n        setNickname(newNickname);\r\n      }\r\n    },\r\n    [nickname]\r\n  );\r\n\r\n  return (\r\n    <SocketContext.Provider value={socket}>\r\n      <div>\r\n        {!nickname ? (\r\n          <Login handleSubmitNickname={handleSubmitNickname} />\r\n        ) : (\r\n          <Chat nickname={nickname} />\r\n        )}\r\n      </div>\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,SAA7B,EAAwCC,QAAxC,EAAkDC,MAAlD,QAAgE,OAAhE;AAEA,SAASC,MAAT,EAAiBC,aAAjB,EAAgCC,YAAhC,QAAoD,kBAApD;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AAEA,OAAO,WAAP;;;AAEA,MAAMC,GAAG,GAAG,MAAM;EAAA;;EAChB,MAAMC,YAAY,GAAGP,MAAM,CAAC,IAAD,CAA3B;EACA,MAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,EAAD,CAAxC;EAEAD,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACXG,MAAM,CAACS,UAAP;IACD,CAFD;EAGD,CAJQ,EAIN,EAJM,CAAT;EAMAZ,SAAS,CAAC,MAAM;IACd,IAAIS,YAAY,CAACI,OAAjB,EAA0B;MACxBV,MAAM,CAACW,IAAP,CAAYT,YAAY,CAACU,eAAzB,EAA0C;QACxCN,YAAY,EAAEA,YAAY,CAACI,OADa;QAExCH;MAFwC,CAA1C;IAID,CALD,MAKO;MACLP,MAAM,CAACW,IAAP,CAAYT,YAAY,CAACW,SAAzB,EAAoC;QAAEN;MAAF,CAApC;IACD;EACF,CATQ,EASN,CAACA,QAAD,CATM,CAAT;EAWA,MAAMO,oBAAoB,GAAGlB,WAAW,CACrCmB,WAAD,IAAiB;IACfT,YAAY,CAACI,OAAb,GAAuBH,QAAvB;;IAEA,IAAIQ,WAAW,KAAK,EAApB,EAAwB;MACtBP,WAAW,CAAC,EAAD,CAAX;IACD,CAFD,MAEO;MACLA,WAAW,CAACO,WAAD,CAAX;IACD;EACF,CATqC,EAUtC,CAACR,QAAD,CAVsC,CAAxC;EAaA,oBACE,QAAC,aAAD,CAAe,QAAf;IAAwB,KAAK,EAAEP,MAA/B;IAAA,uBACE;MAAA,UACG,CAACO,QAAD,gBACC,QAAC,KAAD;QAAO,oBAAoB,EAAEO;MAA7B;QAAA;QAAA;QAAA;MAAA,QADD,gBAGC,QAAC,IAAD;QAAM,QAAQ,EAAEP;MAAhB;QAAA;QAAA;QAAA;MAAA;IAJJ;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AAWD,CA7CD;;GAAMF,G;;KAAAA,G;AA+CN,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}