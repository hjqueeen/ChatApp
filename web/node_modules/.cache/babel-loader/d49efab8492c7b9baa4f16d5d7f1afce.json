{"ast":null,"code":"import { createContext } from 'react';\nimport socketIo from 'socket.io-client';\nimport dayjs from 'dayjs';\nexport const socket = socketIo('http://localhost:4000', {\n  withCredentials: true\n});\nexport const SocketContext = /*#__PURE__*/createContext(socket);\nexport const SOCKET_EVENT = {\n  JOIN_ROOM: 'JOIN_ROOM',\n  UPDATE_NICKNAME: 'UPDATE_NICKNAME',\n  SEND_MESSAGE: 'SEND_MESSAGE',\n  RECEIVE_MESSAGE: 'RECEIVE_MESSAGE'\n};\nexport const makeMessage = pongData => {\n  const {\n    prevNickname,\n    nickname,\n    content,\n    type,\n    time\n  } = pongData;\n  let nicknameLabel;\n  let contentLabel = '';\n\n  switch (type) {\n    case SOCKET_EVENT.JOIN_ROOM:\n      {\n        contentLabel = `${nickname} has joined the room.`;\n        break;\n      }\n\n    case SOCKET_EVENT.UPDATE_NICKNAME:\n      {\n        contentLabel = `User's name has been changed.\\n ${prevNickname} => ${nickname}.`;\n        break;\n      }\n\n    case SOCKET_EVENT.SEND_MESSAGE:\n      {\n        contentLabel = content;\n        nicknameLabel = nickname;\n        break;\n      }\n\n    default:\n  }\n\n  return {\n    nickname: nicknameLabel,\n    content: contentLabel,\n    time: dayjs(time).format('HH:mm')\n  };\n};\nsocket.on('connect', () => {\n  console.log('socket server connected.');\n});\nsocket.on('disconnect', () => {\n  console.log('socket server disconnected.');\n});","map":{"version":3,"names":["createContext","socketIo","dayjs","socket","withCredentials","SocketContext","SOCKET_EVENT","JOIN_ROOM","UPDATE_NICKNAME","SEND_MESSAGE","RECEIVE_MESSAGE","makeMessage","pongData","prevNickname","nickname","content","type","time","nicknameLabel","contentLabel","format","on","console","log"],"sources":["C:/Users/Hyejin Kim/Documents/Programming/Chatapp/세번째- 리액트,CSS/my-chat-app-3/web/src/service/socket.js"],"sourcesContent":["import { createContext } from 'react';\r\nimport socketIo from 'socket.io-client';\r\nimport dayjs from 'dayjs';\r\n\r\nexport const socket = socketIo('http://localhost:4000', {\r\n  withCredentials: true,\r\n});\r\nexport const SocketContext = createContext(socket);\r\n\r\nexport const SOCKET_EVENT = {\r\n  JOIN_ROOM: 'JOIN_ROOM',\r\n  UPDATE_NICKNAME: 'UPDATE_NICKNAME',\r\n  SEND_MESSAGE: 'SEND_MESSAGE',\r\n  RECEIVE_MESSAGE: 'RECEIVE_MESSAGE',\r\n};\r\n\r\nexport const makeMessage = (pongData) => {\r\n  const { prevNickname, nickname, content, type, time } = pongData;\r\n\r\n  let nicknameLabel;\r\n  let contentLabel = '';\r\n\r\n  switch (type) {\r\n    case SOCKET_EVENT.JOIN_ROOM: {\r\n      contentLabel = `${nickname} has joined the room.`;\r\n      break;\r\n    }\r\n    case SOCKET_EVENT.UPDATE_NICKNAME: {\r\n      contentLabel = `User's name has been changed.\\n ${prevNickname} => ${nickname}.`;\r\n      break;\r\n    }\r\n    case SOCKET_EVENT.SEND_MESSAGE: {\r\n      contentLabel = content;\r\n      nicknameLabel = nickname;\r\n      break;\r\n    }\r\n    default:\r\n  }\r\n\r\n  return {\r\n    nickname: nicknameLabel,\r\n    content: contentLabel,\r\n    time: dayjs(time).format('HH:mm'),\r\n  };\r\n};\r\n\r\nsocket.on('connect', () => {\r\n  console.log('socket server connected.');\r\n});\r\n\r\nsocket.on('disconnect', () => {\r\n  console.log('socket server disconnected.');\r\n});\r\n"],"mappings":"AAAA,SAASA,aAAT,QAA8B,OAA9B;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,MAAM,GAAGF,QAAQ,CAAC,uBAAD,EAA0B;EACtDG,eAAe,EAAE;AADqC,CAA1B,CAAvB;AAGP,OAAO,MAAMC,aAAa,gBAAGL,aAAa,CAACG,MAAD,CAAnC;AAEP,OAAO,MAAMG,YAAY,GAAG;EAC1BC,SAAS,EAAE,WADe;EAE1BC,eAAe,EAAE,iBAFS;EAG1BC,YAAY,EAAE,cAHY;EAI1BC,eAAe,EAAE;AAJS,CAArB;AAOP,OAAO,MAAMC,WAAW,GAAIC,QAAD,IAAc;EACvC,MAAM;IAAEC,YAAF;IAAgBC,QAAhB;IAA0BC,OAA1B;IAAmCC,IAAnC;IAAyCC;EAAzC,IAAkDL,QAAxD;EAEA,IAAIM,aAAJ;EACA,IAAIC,YAAY,GAAG,EAAnB;;EAEA,QAAQH,IAAR;IACE,KAAKV,YAAY,CAACC,SAAlB;MAA6B;QAC3BY,YAAY,GAAI,GAAEL,QAAS,uBAA3B;QACA;MACD;;IACD,KAAKR,YAAY,CAACE,eAAlB;MAAmC;QACjCW,YAAY,GAAI,mCAAkCN,YAAa,OAAMC,QAAS,GAA9E;QACA;MACD;;IACD,KAAKR,YAAY,CAACG,YAAlB;MAAgC;QAC9BU,YAAY,GAAGJ,OAAf;QACAG,aAAa,GAAGJ,QAAhB;QACA;MACD;;IACD;EAdF;;EAiBA,OAAO;IACLA,QAAQ,EAAEI,aADL;IAELH,OAAO,EAAEI,YAFJ;IAGLF,IAAI,EAAEf,KAAK,CAACe,IAAD,CAAL,CAAYG,MAAZ,CAAmB,OAAnB;EAHD,CAAP;AAKD,CA5BM;AA8BPjB,MAAM,CAACkB,EAAP,CAAU,SAAV,EAAqB,MAAM;EACzBC,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACD,CAFD;AAIApB,MAAM,CAACkB,EAAP,CAAU,YAAV,EAAwB,MAAM;EAC5BC,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACD,CAFD"},"metadata":{},"sourceType":"module"}